import { Component, Input, ViewChild, EventEmitter, Output, } from '@angular/core';
import { MatPaginator } from '@angular/material/paginator';
import { MatSort } from '@angular/material/sort';
import { MatTableDataSource } from '@angular/material/table';
import { SelectionModel } from '@angular/cdk/collections';
import * as i0 from "@angular/core";
import * as i1 from "@angular/material/table";
import * as i2 from "@angular/material/sort";
import * as i3 from "@angular/material/checkbox";
import * as i4 from "@angular/material/button";
import * as i5 from "@angular/material/radio";
import * as i6 from "@angular/material/paginator";
import * as i7 from "@angular/common";
export class TableComponent {
    constructor() {
        /** pagination affiche l bouton debut/fin   */
        this.showFirstLastButtons = true;
        /** pagination valeur contenu par page   */
        this.pageSizeOptions = [5, 10, 20];
        /** header afficher parmis le contenu de data */
        this.header = [];
        /**liste des bouton */
        this.listbtn = [];
        /** nom header pour les bouton*/
        this.libelleActionBtn = 'Actions';
        /** évènenment sort */
        this._sort = new EventEmitter();
        /** évènenment paginator */
        this._pageEvent = new EventEmitter();
        /** choix utiliser entre checkbox ou radio btn */
        this.checkboxOrRadio = undefined;
        /** couleur utilisé sur checkbox ou radio btn */
        this.checkboxColor = 'primary';
        /** évènenment radiobtn select element */
        this.selectvalue = new EventEmitter();
        // Afficer Pagination
        this.hasPaginator = true;
        // Gestion status
        this.hasStatus = '';
        // Status Class
        this.classSatuts = '';
        /** évènenment Action click */
        this.ClickEventValue = new EventEmitter();
        /** text pour la langue */
        this.language = {
            itemsPerPageLabel: 'Items per page:',
            nextPageLabel: 'Next page',
            previousPageLabel: 'Previous page',
            firstPageLabel: 'First page',
            lastPageLabel: 'Last page',
        };
        this.headerColumn = [];
        this.selection = new SelectionModel(true, []);
        /** redefinition de getRangeLabel dans paginator */
        this.getRangeLabel = (page, pageSize, length) => {
            this.totalData = this.totalData ? this.totalData : this.paginator.length;
            this.pageIndex = this.pageIndex ? this.pageIndex : this.paginator.pageIndex;
            this.pageSize = this.pageSize ? this.pageSize : this.paginator.pageSize;
            if (this.totalData === 0 || this.pageSize === 0) {
                return `javascript">0 / ${this.totalData}`;
            }
            this.totalData = Math.max(this.totalData, 0);
            const startIndex = page * +this.pageSize;
            const endIndex = startIndex < this.totalData
                ? Math.min(startIndex + this.pageSize, this.totalData)
                : startIndex + this.pageSize;
            return `${startIndex + 1} - ${endIndex} / ${+this.totalData}`;
        };
    }
    ngAfterViewInit() {
        setTimeout(() => {
            this.dataSource = new MatTableDataSource(this.data);
            this.dataSource.paginator = this.paginator;
            this.dataSource.sort = this.sort;
            /** initialise l'affichage des texte */
            this.initTextPagination();
            /** initialise le contenu du tableau */
            this.initContenu();
        });
    }
    ngOnInit() { }
    initContenu() {
        /** test si les données reçu ne sont pas vide */
        if (this.dataSource.data.length > 0) {
            /** test si le header type EnteteData a été initialiser */
            if (!this.header.length) {
                this.header = Object.keys(this.dataSource.data[0]).map((e) => {
                    return { libelle: e, propertyname: e };
                });
            }
            // if (this.showClasicBtn) {
            //   /** Ajout colonne Action si bouton clasic est actif */
            //   this.header.push({
            //     libelle: this.libelleActionBtn,
            //     propertyname: '',
            //   });
            // }
            if (this.listbtn.length) {
                /** Ajout colonne Action si un bouton est actif */
                this.header.push({
                    libelle: this.libelleActionBtn,
                    propertyname: '',
                });
            }
            /** Ajout select dans libelle */
            if (this.checkboxOrRadio) {
                this.header.unshift({ libelle: 'select', propertyname: '' });
            }
            /** affectation libelle dans headerColumn */
            this.headerColumn = this.header.map((col) => col.libelle);
        }
    }
    /** initialisation affichage langue et pagination */
    initTextPagination() {
        this.paginator._intl.firstPageLabel = this.language.firstPageLabel;
        this.paginator._intl.itemsPerPageLabel = this.language.itemsPerPageLabel;
        this.paginator._intl.lastPageLabel = this.language.lastPageLabel;
        this.paginator._intl.nextPageLabel = this.language.nextPageLabel;
        this.paginator._intl.previousPageLabel = this.language.previousPageLabel;
        this.paginator._intl.getRangeLabel = this.getRangeLabel;
    }
    /** sort data */
    sortChange(sortState) {
        this._sort.emit(sortState);
    }
    /** event paginate */
    pageEvent(event) {
        this._pageEvent.emit(event);
    }
    /** Indique si le nombre d'éléments sélectionnés correspond au nombre total de lignes.
     */
    isAllSelected() {
        const numSelected = this.selection.selected.length;
        const numRows = this.dataSource.data.length;
        return numSelected === numRows;
    }
    /** Selectionne tous les ligne si il ne sont pas tous selectionner; sinon deselectionne touts */
    masterToggle() {
        if (this.isAllSelected()) {
            this.selection.clear();
            this.selectRow(this.selection.selected);
            return;
        }
        this.selection.select(...this.dataSource.data);
        this.selectRow(this.selection.selected);
    }
    /** Le libellé de la case à cocher sur la ligne transmise */
    checkboxLabel(row) {
        var result;
        if (!row) {
            result = `${this.isAllSelected() ? 'deselect' : 'select'} all`;
        }
        else {
            result = `${this.selection.isSelected(row) ? 'deselect' : 'select'} row ${row.position + 1}`;
        }
        this.selectRow(this.selection.selected);
        return result;
    }
    /** retourn la liste selectionner */
    selectRow(value) {
        this.selectvalue.emit(value);
    }
    /** test header action libelle */
    isAction(item) {
        return item === this.libelleActionBtn;
    }
    /** test header select libelle */
    isSelect(item) {
        return item === 'select';
    }
    /** test si checkbox utilisé ou false radio */
    isCheckbox() {
        return this.checkboxOrRadio === 'checkbox';
    }
    /** selection element sur click de la ligne */
    checkLine(row, index) {
        if (!this.isCheckbox() && this.checkboxOrRadio) {
            this.radioSelected = row;
            this.selectRow(row);
        }
        else if (this.checkboxOrRadio) {
            this.selection.toggle(row);
        }
    }
    EventClickBtn(event) {
        this.ClickEventValue.emit(event);
    }
}
TableComponent.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: "12.0.0", version: "13.3.11", ngImport: i0, type: TableComponent, deps: [], target: i0.ɵɵFactoryTarget.Component });
TableComponent.ɵcmp = i0.ɵɵngDeclareComponent({ minVersion: "12.0.0", version: "13.3.11", type: TableComponent, selector: "igy-table", inputs: { data: "data", showFirstLastButtons: "showFirstLastButtons", pageSizeOptions: "pageSizeOptions", totalData: "totalData", pageSize: "pageSize", pageIndex: "pageIndex", header: "header", listbtn: "listbtn", libelleActionBtn: "libelleActionBtn", checkboxOrRadio: "checkboxOrRadio", checkboxColor: "checkboxColor", hasPaginator: "hasPaginator", hasStatus: "hasStatus", classSatuts: "classSatuts", language: "language" }, outputs: { _sort: "_sort", _pageEvent: "_pageEvent", selectvalue: "selectvalue", ClickEventValue: "ClickEventValue" }, viewQueries: [{ propertyName: "paginator", first: true, predicate: MatPaginator, descendants: true }, { propertyName: "sort", first: true, predicate: MatSort, descendants: true }], ngImport: i0, template: "<div class=\"igy-table\">\r\n  <table mat-table [dataSource]=\"dataSource\" matSort (matSortChange)=\"sortChange($event)\">\r\n    <ng-container [matColumnDef]=\"item.libelle\" *ngFor=\"let item of header; let i = index\">\r\n      <th mat-header-cell mat-sort-header *matHeaderCellDef\r\n        [disabled]=\"isAction(item.libelle) || isSelect(item.libelle)\"\r\n        [ngClass]=\"{ 'col-action-cnt': item.libelle === libelleActionBtn }\">\r\n        <span *ngIf=\"!isSelect(item.libelle); else checkboxheader\">{{\r\n          item.libelle\r\n          }}</span>\r\n        <ng-template #checkboxheader>\r\n          <ng-container *ngIf=\"isCheckbox()\">\r\n            <mat-checkbox (change)=\"$event ? masterToggle() : null\" [checked]=\"selection.hasValue() && isAllSelected()\"\r\n              [color]=\"checkboxColor\" [indeterminate]=\"selection.hasValue() && !isAllSelected()\"\r\n              [aria-label]=\"checkboxLabel()\">\r\n            </mat-checkbox>\r\n          </ng-container>\r\n        </ng-template>\r\n      </th>\r\n      <td mat-cell *matCellDef=\"let element; let rowIndex = index\"\r\n        [ngClass]=\"{ 'col-action-cnt': item.libelle === libelleActionBtn }\">\r\n        <span *ngIf=\"!isAction(item.libelle) && !isSelect(item.libelle); else autre\" [ngClass]=\"item.libelle === hasStatus ? classSatuts : ''\">\r\n          {{ element[item.propertyname] }}\r\n        </span>\r\n        <ng-template #autre>\r\n          <ng-container *ngIf=\"isAction(item.libelle); else checkboxRadio\">\r\n            <button mat-button class=\"table-btn\" [ngClass]=\"btn.class\" [color]=\"btn.color\" (click)=\"btn.action(element)\"\r\n              *ngFor=\"let btn of listbtn; let j = index\">\r\n              <span class=\"material-icons\" *ngIf=\"!btn.istext\">{{ btn.iconName }}</span>\r\n              <span *ngIf=\"btn.istext\" class=\"{{btn.class}}\">{{ btn.iconName }}</span>\r\n            </button>\r\n          </ng-container>\r\n          <ng-template #checkboxRadio>\r\n            <ng-container *ngIf=\"isCheckbox()\">\r\n              <mat-checkbox (click)=\"$event.stopPropagation()\" (change)=\"$event ? selection.toggle(element) : null\"\r\n                [color]=\"checkboxColor\" [checked]=\"selection.isSelected(element)\" [aria-label]=\"checkboxLabel(element)\">\r\n              </mat-checkbox>\r\n            </ng-container>\r\n            <ng-container *ngIf=\"!isCheckbox()\">\r\n              <mat-radio-button [color]=\"checkboxColor\" name=\"SelectionRadio\" [value]=\"element\"\r\n                (click)=\"selectRow(element)\" (change)=\"$event ? (radioSelected = $event.value) : null\"\r\n                [checked]=\"element == radioSelected\">\r\n              </mat-radio-button>\r\n            </ng-container>\r\n          </ng-template>\r\n        </ng-template>\r\n      </td>\r\n    </ng-container>\r\n\r\n    <tr mat-header-row *matHeaderRowDef=\"headerColumn\"></tr>\r\n    <tr mat-row *matRowDef=\"let row; let rowIndex = index; columns: headerColumn\" (click)=\"checkLine(row, rowIndex)\">\r\n    </tr>\r\n  </table>\r\n  <mat-paginator [pageSizeOptions]=\"pageSizeOptions\" [showFirstLastButtons]=\"showFirstLastButtons\" [length]=\"totalData\"\r\n    [pageSize]=\"pageSize\" [pageIndex]=\"pageIndex\" (page)=\"pageEvent($event)\" *ngIf=\"hasPaginator\">\r\n  </mat-paginator>\r\n</div>\r\n", styles: ["@import\"https://fonts.googleapis.com/css2?family=Inter:wght@100;300;400;500;700&family=Lato:ital,wght@0,100;0,300;0,400;0,700;1,100&family=Montserrat:wght@100;200;300;400;500;600;700&family=Permanent+Marker&family=Poppins:wght@100;300;400;500;600;700&family=Raleway:wght@100;200;300;400;500;600;700&family=Roboto+Condensed:wght@300;400;700&display=swap\";@font-face{font-family:Material Icons;font-style:normal;font-weight:400;font-display:block;src:url(./material-icons.woff2) format(\"woff2\"),url(./material-icons.woff) format(\"woff\")}.material-icons{font-family:Material Icons;font-weight:400;font-style:normal;font-size:24px;line-height:1;letter-spacing:normal;text-transform:none;display:inline-block;white-space:nowrap;word-wrap:normal;direction:ltr;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;text-rendering:optimizeLegibility;font-feature-settings:\"liga\"}@font-face{font-family:Material Icons Outlined;font-style:normal;font-weight:400;font-display:block;src:url(./material-icons-outlined.woff2) format(\"woff2\"),url(./material-icons-outlined.woff) format(\"woff\")}.material-icons-outlined{font-family:Material Icons Outlined;font-weight:400;font-style:normal;font-size:24px;line-height:1;letter-spacing:normal;text-transform:none;display:inline-block;white-space:nowrap;word-wrap:normal;direction:ltr;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;text-rendering:optimizeLegibility;font-feature-settings:\"liga\"}@font-face{font-family:Material Icons Round;font-style:normal;font-weight:400;font-display:block;src:url(./material-icons-round.woff2) format(\"woff2\"),url(./material-icons-round.woff) format(\"woff\")}.material-icons-round{font-family:Material Icons Round;font-weight:400;font-style:normal;font-size:24px;line-height:1;letter-spacing:normal;text-transform:none;display:inline-block;white-space:nowrap;word-wrap:normal;direction:ltr;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;text-rendering:optimizeLegibility;font-feature-settings:\"liga\"}@font-face{font-family:Material Icons Sharp;font-style:normal;font-weight:400;font-display:block;src:url(./material-icons-sharp.woff2) format(\"woff2\"),url(./material-icons-sharp.woff) format(\"woff\")}.material-icons-sharp{font-family:Material Icons Sharp;font-weight:400;font-style:normal;font-size:24px;line-height:1;letter-spacing:normal;text-transform:none;display:inline-block;white-space:nowrap;word-wrap:normal;direction:ltr;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;text-rendering:optimizeLegibility;font-feature-settings:\"liga\"}@font-face{font-family:Material Icons Two Tone;font-style:normal;font-weight:400;font-display:block;src:url(./material-icons-two-tone.woff2) format(\"woff2\"),url(./material-icons-two-tone.woff) format(\"woff\")}.material-icons-two-tone{font-family:Material Icons Two Tone;font-weight:400;font-style:normal;font-size:24px;line-height:1;letter-spacing:normal;text-transform:none;display:inline-block;white-space:nowrap;word-wrap:normal;direction:ltr;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;text-rendering:optimizeLegibility;font-feature-settings:\"liga\"}.fx-align-center{width:inherit;display:flex;justify-content:center}.fx-align-left{width:inherit;display:flex;justify-content:flex-start}.fx-align-right{width:inherit;display:flex;justify-content:flex-end}.bg-card-green{background:rgba(227,247,225,.2);box-shadow:0 4px 4px #00000040}.bg-card-orange{background:#FF6633;box-shadow:0 4px 4px #00000040}.bg-card-gray{background:#f4f4f4;box-shadow:0 4px 4px #00000040}.bg-card-gray-2{background:#f8f8f8;box-shadow:0 4px 4px #00000040}.bg-card-yellow{background:#fff5de;box-shadow:0 4px 4px #00000040}h1{font-family:Montserrat,sans-serif;font-style:normal;font-weight:700;font-size:24px;line-height:20px;background:linear-gradient(90deg,#800080 27.6%,#FF6633 100%);-webkit-background-clip:text;-webkit-text-fill-color:transparent;padding-bottom:20px}h2{font-family:Montserrat,sans-serif;font-style:normal;font-weight:700;font-size:20px;line-height:20px}h3{font-family:Montserrat,sans-serif;font-style:normal;font-weight:700;font-size:18px;line-height:20px}h4{font-family:Montserrat,sans-serif;font-style:normal;font-weight:700;font-size:16px;line-height:20px}h5{font-family:Montserrat,sans-serif;font-style:normal;font-weight:700;font-size:14px;line-height:20px}P,div{font-family:Montserrat,sans-serif;font-style:normal;font-weight:400;font-size:14px;line-height:20px}span{font-family:Montserrat,sans-serif;font-style:normal;font-weight:400;font-size:12px;line-height:20px}a{font-family:Montserrat,sans-serif;font-style:normal;font-weight:400;font-size:12px;line-height:20px;text-decoration:none;cursor:pointer}label{font-family:Montserrat,sans-serif;font-style:normal;font-weight:600;font-size:12px;line-height:20px}button{outline:none}button:hover{outline:none;background:transparent;box-shadow:none}.cnt-form-action{display:flex;justify-content:flex-end}.cnt-form-action>igy-button{margin-left:15px}.igy-card{background:#ffffff;border-radius:10px;box-shadow:0 16px 24px #0000000f,0 2px 6px #0000000a,0 0 1px #0000000a}.primary-btn{background-color:#0cb465;border-color:#0cb465;color:#fff;box-shadow:none;border:none;height:35px;width:inherit}.item-input-container{margin-bottom:20px}.item-input-container .mat-form-field-wrapper{margin-bottom:-1.25em}.item-input-container input.mat-input-element,.item-input-container span.mat-select-min-line{color:#333;font-family:Montserrat,sans-serif;font-style:normal;font-weight:500;font-size:13px;line-height:12px}.item-input-container .mat-form-field-infix{border:1px solid #8e8ea1!important;box-sizing:border-box;height:35px!important;border-radius:0;font-style:normal;font-weight:400!important;font-size:14px!important;line-height:21px!important;color:#afb2b8!important;padding-left:10px;padding-right:10px;width:100%}.item-input-container .mat-form-field-underline{display:none}.item-input-container .mat-form-field-label-wrapper{padding-top:0;top:-.8em;overflow:visible}.item-input-container .mat-form-field-appearance-legacy.mat-form-field-can-float.mat-form-field-should-float .mat-form-field-label{transform:translateY(-1.4815em) scale(.85) perspective(100px) translateZ(-.6em);font-size:15px}.item-input-container .mat-form-field-appearance-legacy.mat-form-field-can-float.mat-form-field-should-float .mat-form-field-label span,.item-input-container .mat-form-field-appearance-legacy.mat-form-field-can-float.mat-form-field-should-float .mat-form-field-label mat-label.select-label{background-color:#fff;padding:5px 10px;top:2px;left:10px;position:relative;color:#333;font-weight:600}.item-input-container .mat-form-field-appearance-legacy:not(.mat-form-field-can-float.mat-form-field-should-float) .mat-form-field-label{padding-left:10px}.item-input-container .item-validation-container span{font-size:11px;color:#f96969;font-weight:600}:host ::ng-deep .igy-table{margin-bottom:50px}:host ::ng-deep .igy-table .mat-table{width:100%;background:transparent}:host ::ng-deep .igy-table .mat-table .mat-header-row{height:32px;background:#320032}:host ::ng-deep .igy-table .mat-table .mat-header-cell{font-family:Montserrat,sans-serif;font-weight:700;font-size:12px;line-height:20px;color:#00341c;font-style:normal;align-items:center;letter-spacing:.25px;padding-top:8px;padding-bottom:8px;padding-left:15px}:host ::ng-deep .igy-table .mat-table .mat-header-cell .mat-sort-header-content>span{font-family:Montserrat,sans-serif;font-style:normal;font-weight:700;font-size:12px;line-height:20px;color:#fff}:host ::ng-deep .igy-table .mat-table .mat-row{height:38px}:host ::ng-deep .igy-table .mat-table .mat-row .mat-cell{font-family:Montserrat,sans-serif;font-style:normal;font-weight:400;font-size:14px;line-height:45px;color:#0c2218;padding-left:15px}:host ::ng-deep .igy-table .mat-table .mat-row:last-child .mat-cell{border-bottom:none}:host ::ng-deep .igy-table .mat-table .col-action-cnt{text-align:center;min-width:150px}:host ::ng-deep .igy-table .mat-table .col-action-cnt .mat-sort-header-container{justify-content:center;padding:0 15px}:host ::ng-deep .igy-table .mat-table .table-btn{background:transparent;border:none;margin:0 5px;width:auto;box-shadow:none;padding:0}:host ::ng-deep .igy-table .mat-table .table-btn.delete .material-icons{color:red}:host ::ng-deep .igy-table .mat-table .table-btn.edit .material-icons{color:#f63}:host ::ng-deep .igy-table .mat-table .table-btn.add .material-icons{color:purple}:host ::ng-deep .mat-paginator-container{min-width:500px;align-items:center;align-content:center;margin:initial;margin-left:auto}:host ::ng-deep .mat-paginator-container .mat-form-field-wrapper{padding-bottom:0}:host ::ng-deep .mat-paginator-container .mat-form-field-wrapper .mat-form-field-underline{display:none}:host ::ng-deep .mat-paginator-container .mat-form-field-infix{background:#FF6633;padding:0;border-top:none;text-align:center;border:none;margin-bottom:5px}:host ::ng-deep .mat-paginator-container .mat-icon-button{height:30px;margin-bottom:10px}:host ::ng-deep .mat-paginator-container .mat-paginator-page-size{align-items:center}:host ::ng-deep .mat-paginator-container .mat-paginator-page-size-label,:host ::ng-deep .mat-paginator-container .mat-paginator-range-label{font-family:Montserrat,sans-serif;font-style:normal;font-weight:400;font-size:14px;line-height:45px;color:#0c2218}:host ::ng-deep .mat-paginator-container .mat-select-value{font-family:Montserrat,sans-serif;font-style:normal;font-weight:400;font-size:14px;line-height:24px;color:#0c2218}:host ::ng-deep .mat-paginator-container .mat-paginator-icon{width:24px}.btn-standard{box-shadow:1px 3px 4px #00000040;border:none;font-style:normal;font-weight:500;font-size:14px;line-height:16px;align-items:center;padding:5px 10px;margin:auto}.btn-standard.blue{background:#4482b3;color:#fff}.btn-standard.green{background:#50bd61;color:#fff}.btn-standard.magenta{background:#800080;color:#fff}.btn-standard.orange{background:#FF6633;color:#fff}\n"], components: [{ type: i1.MatTable, selector: "mat-table, table[mat-table]", exportAs: ["matTable"] }, { type: i2.MatSortHeader, selector: "[mat-sort-header]", inputs: ["disabled", "mat-sort-header", "arrowPosition", "start", "sortActionDescription", "disableClear"], exportAs: ["matSortHeader"] }, { type: i3.MatCheckbox, selector: "mat-checkbox", inputs: ["disableRipple", "color", "tabIndex", "aria-label", "aria-labelledby", "aria-describedby", "id", "required", "labelPosition", "name", "value", "checked", "disabled", "indeterminate"], outputs: ["change", "indeterminateChange"], exportAs: ["matCheckbox"] }, { type: i4.MatButton, selector: "button[mat-button], button[mat-raised-button], button[mat-icon-button],             button[mat-fab], button[mat-mini-fab], button[mat-stroked-button],             button[mat-flat-button]", inputs: ["disabled", "disableRipple", "color"], exportAs: ["matButton"] }, { type: i5.MatRadioButton, selector: "mat-radio-button", inputs: ["disableRipple", "tabIndex"], exportAs: ["matRadioButton"] }, { type: i1.MatHeaderRow, selector: "mat-header-row, tr[mat-header-row]", exportAs: ["matHeaderRow"] }, { type: i1.MatRow, selector: "mat-row, tr[mat-row]", exportAs: ["matRow"] }, { type: i6.MatPaginator, selector: "mat-paginator", inputs: ["disabled"], exportAs: ["matPaginator"] }], directives: [{ type: i2.MatSort, selector: "[matSort]", inputs: ["matSortDisabled", "matSortActive", "matSortStart", "matSortDirection", "matSortDisableClear"], outputs: ["matSortChange"], exportAs: ["matSort"] }, { type: i7.NgForOf, selector: "[ngFor][ngForOf]", inputs: ["ngForOf", "ngForTrackBy", "ngForTemplate"] }, { type: i1.MatColumnDef, selector: "[matColumnDef]", inputs: ["sticky", "matColumnDef"] }, { type: i1.MatHeaderCellDef, selector: "[matHeaderCellDef]" }, { type: i1.MatHeaderCell, selector: "mat-header-cell, th[mat-header-cell]" }, { type: i7.NgClass, selector: "[ngClass]", inputs: ["class", "ngClass"] }, { type: i7.NgIf, selector: "[ngIf]", inputs: ["ngIf", "ngIfThen", "ngIfElse"] }, { type: i1.MatCellDef, selector: "[matCellDef]" }, { type: i1.MatCell, selector: "mat-cell, td[mat-cell]" }, { type: i1.MatHeaderRowDef, selector: "[matHeaderRowDef]", inputs: ["matHeaderRowDef", "matHeaderRowDefSticky"] }, { type: i1.MatRowDef, selector: "[matRowDef]", inputs: ["matRowDefColumns", "matRowDefWhen"] }] });
i0.ɵɵngDeclareClassMetadata({ minVersion: "12.0.0", version: "13.3.11", ngImport: i0, type: TableComponent, decorators: [{
            type: Component,
            args: [{ selector: 'igy-table', template: "<div class=\"igy-table\">\r\n  <table mat-table [dataSource]=\"dataSource\" matSort (matSortChange)=\"sortChange($event)\">\r\n    <ng-container [matColumnDef]=\"item.libelle\" *ngFor=\"let item of header; let i = index\">\r\n      <th mat-header-cell mat-sort-header *matHeaderCellDef\r\n        [disabled]=\"isAction(item.libelle) || isSelect(item.libelle)\"\r\n        [ngClass]=\"{ 'col-action-cnt': item.libelle === libelleActionBtn }\">\r\n        <span *ngIf=\"!isSelect(item.libelle); else checkboxheader\">{{\r\n          item.libelle\r\n          }}</span>\r\n        <ng-template #checkboxheader>\r\n          <ng-container *ngIf=\"isCheckbox()\">\r\n            <mat-checkbox (change)=\"$event ? masterToggle() : null\" [checked]=\"selection.hasValue() && isAllSelected()\"\r\n              [color]=\"checkboxColor\" [indeterminate]=\"selection.hasValue() && !isAllSelected()\"\r\n              [aria-label]=\"checkboxLabel()\">\r\n            </mat-checkbox>\r\n          </ng-container>\r\n        </ng-template>\r\n      </th>\r\n      <td mat-cell *matCellDef=\"let element; let rowIndex = index\"\r\n        [ngClass]=\"{ 'col-action-cnt': item.libelle === libelleActionBtn }\">\r\n        <span *ngIf=\"!isAction(item.libelle) && !isSelect(item.libelle); else autre\" [ngClass]=\"item.libelle === hasStatus ? classSatuts : ''\">\r\n          {{ element[item.propertyname] }}\r\n        </span>\r\n        <ng-template #autre>\r\n          <ng-container *ngIf=\"isAction(item.libelle); else checkboxRadio\">\r\n            <button mat-button class=\"table-btn\" [ngClass]=\"btn.class\" [color]=\"btn.color\" (click)=\"btn.action(element)\"\r\n              *ngFor=\"let btn of listbtn; let j = index\">\r\n              <span class=\"material-icons\" *ngIf=\"!btn.istext\">{{ btn.iconName }}</span>\r\n              <span *ngIf=\"btn.istext\" class=\"{{btn.class}}\">{{ btn.iconName }}</span>\r\n            </button>\r\n          </ng-container>\r\n          <ng-template #checkboxRadio>\r\n            <ng-container *ngIf=\"isCheckbox()\">\r\n              <mat-checkbox (click)=\"$event.stopPropagation()\" (change)=\"$event ? selection.toggle(element) : null\"\r\n                [color]=\"checkboxColor\" [checked]=\"selection.isSelected(element)\" [aria-label]=\"checkboxLabel(element)\">\r\n              </mat-checkbox>\r\n            </ng-container>\r\n            <ng-container *ngIf=\"!isCheckbox()\">\r\n              <mat-radio-button [color]=\"checkboxColor\" name=\"SelectionRadio\" [value]=\"element\"\r\n                (click)=\"selectRow(element)\" (change)=\"$event ? (radioSelected = $event.value) : null\"\r\n                [checked]=\"element == radioSelected\">\r\n              </mat-radio-button>\r\n            </ng-container>\r\n          </ng-template>\r\n        </ng-template>\r\n      </td>\r\n    </ng-container>\r\n\r\n    <tr mat-header-row *matHeaderRowDef=\"headerColumn\"></tr>\r\n    <tr mat-row *matRowDef=\"let row; let rowIndex = index; columns: headerColumn\" (click)=\"checkLine(row, rowIndex)\">\r\n    </tr>\r\n  </table>\r\n  <mat-paginator [pageSizeOptions]=\"pageSizeOptions\" [showFirstLastButtons]=\"showFirstLastButtons\" [length]=\"totalData\"\r\n    [pageSize]=\"pageSize\" [pageIndex]=\"pageIndex\" (page)=\"pageEvent($event)\" *ngIf=\"hasPaginator\">\r\n  </mat-paginator>\r\n</div>\r\n", styles: ["@import\"https://fonts.googleapis.com/css2?family=Inter:wght@100;300;400;500;700&family=Lato:ital,wght@0,100;0,300;0,400;0,700;1,100&family=Montserrat:wght@100;200;300;400;500;600;700&family=Permanent+Marker&family=Poppins:wght@100;300;400;500;600;700&family=Raleway:wght@100;200;300;400;500;600;700&family=Roboto+Condensed:wght@300;400;700&display=swap\";@font-face{font-family:Material Icons;font-style:normal;font-weight:400;font-display:block;src:url(./material-icons.woff2) format(\"woff2\"),url(./material-icons.woff) format(\"woff\")}.material-icons{font-family:Material Icons;font-weight:400;font-style:normal;font-size:24px;line-height:1;letter-spacing:normal;text-transform:none;display:inline-block;white-space:nowrap;word-wrap:normal;direction:ltr;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;text-rendering:optimizeLegibility;font-feature-settings:\"liga\"}@font-face{font-family:Material Icons Outlined;font-style:normal;font-weight:400;font-display:block;src:url(./material-icons-outlined.woff2) format(\"woff2\"),url(./material-icons-outlined.woff) format(\"woff\")}.material-icons-outlined{font-family:Material Icons Outlined;font-weight:400;font-style:normal;font-size:24px;line-height:1;letter-spacing:normal;text-transform:none;display:inline-block;white-space:nowrap;word-wrap:normal;direction:ltr;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;text-rendering:optimizeLegibility;font-feature-settings:\"liga\"}@font-face{font-family:Material Icons Round;font-style:normal;font-weight:400;font-display:block;src:url(./material-icons-round.woff2) format(\"woff2\"),url(./material-icons-round.woff) format(\"woff\")}.material-icons-round{font-family:Material Icons Round;font-weight:400;font-style:normal;font-size:24px;line-height:1;letter-spacing:normal;text-transform:none;display:inline-block;white-space:nowrap;word-wrap:normal;direction:ltr;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;text-rendering:optimizeLegibility;font-feature-settings:\"liga\"}@font-face{font-family:Material Icons Sharp;font-style:normal;font-weight:400;font-display:block;src:url(./material-icons-sharp.woff2) format(\"woff2\"),url(./material-icons-sharp.woff) format(\"woff\")}.material-icons-sharp{font-family:Material Icons Sharp;font-weight:400;font-style:normal;font-size:24px;line-height:1;letter-spacing:normal;text-transform:none;display:inline-block;white-space:nowrap;word-wrap:normal;direction:ltr;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;text-rendering:optimizeLegibility;font-feature-settings:\"liga\"}@font-face{font-family:Material Icons Two Tone;font-style:normal;font-weight:400;font-display:block;src:url(./material-icons-two-tone.woff2) format(\"woff2\"),url(./material-icons-two-tone.woff) format(\"woff\")}.material-icons-two-tone{font-family:Material Icons Two Tone;font-weight:400;font-style:normal;font-size:24px;line-height:1;letter-spacing:normal;text-transform:none;display:inline-block;white-space:nowrap;word-wrap:normal;direction:ltr;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;text-rendering:optimizeLegibility;font-feature-settings:\"liga\"}.fx-align-center{width:inherit;display:flex;justify-content:center}.fx-align-left{width:inherit;display:flex;justify-content:flex-start}.fx-align-right{width:inherit;display:flex;justify-content:flex-end}.bg-card-green{background:rgba(227,247,225,.2);box-shadow:0 4px 4px #00000040}.bg-card-orange{background:#FF6633;box-shadow:0 4px 4px #00000040}.bg-card-gray{background:#f4f4f4;box-shadow:0 4px 4px #00000040}.bg-card-gray-2{background:#f8f8f8;box-shadow:0 4px 4px #00000040}.bg-card-yellow{background:#fff5de;box-shadow:0 4px 4px #00000040}h1{font-family:Montserrat,sans-serif;font-style:normal;font-weight:700;font-size:24px;line-height:20px;background:linear-gradient(90deg,#800080 27.6%,#FF6633 100%);-webkit-background-clip:text;-webkit-text-fill-color:transparent;padding-bottom:20px}h2{font-family:Montserrat,sans-serif;font-style:normal;font-weight:700;font-size:20px;line-height:20px}h3{font-family:Montserrat,sans-serif;font-style:normal;font-weight:700;font-size:18px;line-height:20px}h4{font-family:Montserrat,sans-serif;font-style:normal;font-weight:700;font-size:16px;line-height:20px}h5{font-family:Montserrat,sans-serif;font-style:normal;font-weight:700;font-size:14px;line-height:20px}P,div{font-family:Montserrat,sans-serif;font-style:normal;font-weight:400;font-size:14px;line-height:20px}span{font-family:Montserrat,sans-serif;font-style:normal;font-weight:400;font-size:12px;line-height:20px}a{font-family:Montserrat,sans-serif;font-style:normal;font-weight:400;font-size:12px;line-height:20px;text-decoration:none;cursor:pointer}label{font-family:Montserrat,sans-serif;font-style:normal;font-weight:600;font-size:12px;line-height:20px}button{outline:none}button:hover{outline:none;background:transparent;box-shadow:none}.cnt-form-action{display:flex;justify-content:flex-end}.cnt-form-action>igy-button{margin-left:15px}.igy-card{background:#ffffff;border-radius:10px;box-shadow:0 16px 24px #0000000f,0 2px 6px #0000000a,0 0 1px #0000000a}.primary-btn{background-color:#0cb465;border-color:#0cb465;color:#fff;box-shadow:none;border:none;height:35px;width:inherit}.item-input-container{margin-bottom:20px}.item-input-container .mat-form-field-wrapper{margin-bottom:-1.25em}.item-input-container input.mat-input-element,.item-input-container span.mat-select-min-line{color:#333;font-family:Montserrat,sans-serif;font-style:normal;font-weight:500;font-size:13px;line-height:12px}.item-input-container .mat-form-field-infix{border:1px solid #8e8ea1!important;box-sizing:border-box;height:35px!important;border-radius:0;font-style:normal;font-weight:400!important;font-size:14px!important;line-height:21px!important;color:#afb2b8!important;padding-left:10px;padding-right:10px;width:100%}.item-input-container .mat-form-field-underline{display:none}.item-input-container .mat-form-field-label-wrapper{padding-top:0;top:-.8em;overflow:visible}.item-input-container .mat-form-field-appearance-legacy.mat-form-field-can-float.mat-form-field-should-float .mat-form-field-label{transform:translateY(-1.4815em) scale(.85) perspective(100px) translateZ(-.6em);font-size:15px}.item-input-container .mat-form-field-appearance-legacy.mat-form-field-can-float.mat-form-field-should-float .mat-form-field-label span,.item-input-container .mat-form-field-appearance-legacy.mat-form-field-can-float.mat-form-field-should-float .mat-form-field-label mat-label.select-label{background-color:#fff;padding:5px 10px;top:2px;left:10px;position:relative;color:#333;font-weight:600}.item-input-container .mat-form-field-appearance-legacy:not(.mat-form-field-can-float.mat-form-field-should-float) .mat-form-field-label{padding-left:10px}.item-input-container .item-validation-container span{font-size:11px;color:#f96969;font-weight:600}:host ::ng-deep .igy-table{margin-bottom:50px}:host ::ng-deep .igy-table .mat-table{width:100%;background:transparent}:host ::ng-deep .igy-table .mat-table .mat-header-row{height:32px;background:#320032}:host ::ng-deep .igy-table .mat-table .mat-header-cell{font-family:Montserrat,sans-serif;font-weight:700;font-size:12px;line-height:20px;color:#00341c;font-style:normal;align-items:center;letter-spacing:.25px;padding-top:8px;padding-bottom:8px;padding-left:15px}:host ::ng-deep .igy-table .mat-table .mat-header-cell .mat-sort-header-content>span{font-family:Montserrat,sans-serif;font-style:normal;font-weight:700;font-size:12px;line-height:20px;color:#fff}:host ::ng-deep .igy-table .mat-table .mat-row{height:38px}:host ::ng-deep .igy-table .mat-table .mat-row .mat-cell{font-family:Montserrat,sans-serif;font-style:normal;font-weight:400;font-size:14px;line-height:45px;color:#0c2218;padding-left:15px}:host ::ng-deep .igy-table .mat-table .mat-row:last-child .mat-cell{border-bottom:none}:host ::ng-deep .igy-table .mat-table .col-action-cnt{text-align:center;min-width:150px}:host ::ng-deep .igy-table .mat-table .col-action-cnt .mat-sort-header-container{justify-content:center;padding:0 15px}:host ::ng-deep .igy-table .mat-table .table-btn{background:transparent;border:none;margin:0 5px;width:auto;box-shadow:none;padding:0}:host ::ng-deep .igy-table .mat-table .table-btn.delete .material-icons{color:red}:host ::ng-deep .igy-table .mat-table .table-btn.edit .material-icons{color:#f63}:host ::ng-deep .igy-table .mat-table .table-btn.add .material-icons{color:purple}:host ::ng-deep .mat-paginator-container{min-width:500px;align-items:center;align-content:center;margin:initial;margin-left:auto}:host ::ng-deep .mat-paginator-container .mat-form-field-wrapper{padding-bottom:0}:host ::ng-deep .mat-paginator-container .mat-form-field-wrapper .mat-form-field-underline{display:none}:host ::ng-deep .mat-paginator-container .mat-form-field-infix{background:#FF6633;padding:0;border-top:none;text-align:center;border:none;margin-bottom:5px}:host ::ng-deep .mat-paginator-container .mat-icon-button{height:30px;margin-bottom:10px}:host ::ng-deep .mat-paginator-container .mat-paginator-page-size{align-items:center}:host ::ng-deep .mat-paginator-container .mat-paginator-page-size-label,:host ::ng-deep .mat-paginator-container .mat-paginator-range-label{font-family:Montserrat,sans-serif;font-style:normal;font-weight:400;font-size:14px;line-height:45px;color:#0c2218}:host ::ng-deep .mat-paginator-container .mat-select-value{font-family:Montserrat,sans-serif;font-style:normal;font-weight:400;font-size:14px;line-height:24px;color:#0c2218}:host ::ng-deep .mat-paginator-container .mat-paginator-icon{width:24px}.btn-standard{box-shadow:1px 3px 4px #00000040;border:none;font-style:normal;font-weight:500;font-size:14px;line-height:16px;align-items:center;padding:5px 10px;margin:auto}.btn-standard.blue{background:#4482b3;color:#fff}.btn-standard.green{background:#50bd61;color:#fff}.btn-standard.magenta{background:#800080;color:#fff}.btn-standard.orange{background:#FF6633;color:#fff}\n"] }]
        }], ctorParameters: function () { return []; }, propDecorators: { paginator: [{
                type: ViewChild,
                args: [MatPaginator]
            }], data: [{
                type: Input
            }], showFirstLastButtons: [{
                type: Input
            }], pageSizeOptions: [{
                type: Input
            }], totalData: [{
                type: Input
            }], pageSize: [{
                type: Input
            }], pageIndex: [{
                type: Input
            }], header: [{
                type: Input
            }], listbtn: [{
                type: Input
            }], libelleActionBtn: [{
                type: Input
            }], _sort: [{
                type: Output
            }], _pageEvent: [{
                type: Output
            }], checkboxOrRadio: [{
                type: Input
            }], checkboxColor: [{
                type: Input
            }], selectvalue: [{
                type: Output
            }], hasPaginator: [{
                type: Input
            }], hasStatus: [{
                type: Input
            }], classSatuts: [{
                type: Input
            }], ClickEventValue: [{
                type: Output
            }], language: [{
                type: Input
            }], sort: [{
                type: ViewChild,
                args: [MatSort]
            }] } });
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidGFibGUuY29tcG9uZW50LmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vLi4vLi4vcHJvamVjdHMvaWd5LXRlbXBsYXRlcy1tb2R1bGVzL3NyYy9saWIvY29tcG9zYW50cy90YWJsZS90YWJsZS5jb21wb25lbnQudHMiLCIuLi8uLi8uLi8uLi8uLi8uLi9wcm9qZWN0cy9pZ3ktdGVtcGxhdGVzLW1vZHVsZXMvc3JjL2xpYi9jb21wb3NhbnRzL3RhYmxlL3RhYmxlLmNvbXBvbmVudC5odG1sIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLE9BQU8sRUFDTCxTQUFTLEVBQ1QsS0FBSyxFQUVMLFNBQVMsRUFDVCxZQUFZLEVBQ1osTUFBTSxHQUNQLE1BQU0sZUFBZSxDQUFDO0FBRXZCLE9BQU8sRUFBRSxZQUFZLEVBQXNCLE1BQU0sNkJBQTZCLENBQUM7QUFDL0UsT0FBTyxFQUFFLE9BQU8sRUFBUSxNQUFNLHdCQUF3QixDQUFDO0FBQ3ZELE9BQU8sRUFBRSxrQkFBa0IsRUFBRSxNQUFNLHlCQUF5QixDQUFDO0FBQzdELE9BQU8sRUFBRSxjQUFjLEVBQUUsTUFBTSwwQkFBMEIsQ0FBQzs7Ozs7Ozs7O0FBK0IxRCxNQUFNLE9BQU8sY0FBYztJQW1GekI7UUE5RUEsOENBQThDO1FBQ3JDLHlCQUFvQixHQUFZLElBQUksQ0FBQztRQUU5QywyQ0FBMkM7UUFDbEMsb0JBQWUsR0FBYSxDQUFDLENBQUMsRUFBRSxFQUFFLEVBQUUsRUFBRSxDQUFDLENBQUM7UUFXakQsZ0RBQWdEO1FBQ3ZDLFdBQU0sR0FBaUIsRUFBRSxDQUFDO1FBRW5DLHNCQUFzQjtRQUNiLFlBQU8sR0FBZ0IsRUFBRSxDQUFDO1FBRW5DLGdDQUFnQztRQUN2QixxQkFBZ0IsR0FBVyxTQUFTLENBQUM7UUFFOUMsc0JBQXNCO1FBQ1osVUFBSyxHQUFHLElBQUksWUFBWSxFQUFXLENBQUM7UUFFOUMsMkJBQTJCO1FBQ2pCLGVBQVUsR0FBRyxJQUFJLFlBQVksRUFBVyxD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QUFNO2dCQUdHLFVBQVU7c0JBQW5CLE1BQU07Z0JBR0UsZUFBZTtzQkFBdkIsS0FBSztnQkFHRyxhQUFhO3NCQUFyQixLQUFLO2dCQUdJLFdBQVc7c0JBQXBCLE1BQU07Z0JBR0UsWUFBWTtzQkFBcEIsS0FBSztnQkFHRyxTQUFTO3NCQUFqQixLQUFLO2dCQUdHLFdBQVc7c0JBQW5CLEtBQUs7Z0JBR0ksZUFBZTtzQkFBeEIsTUFBTTtnQkFHRSxRQUFRO3NCQUFoQixLQUFLO2dCQVVjLElBQUk7c0JBQXZCLFNBQVM7dUJBQUMsT0FBTyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7XHJcbiAgQ29tcG9uZW50LFxyXG4gIElucHV0LFxyXG4gIE9uSW5pdCxcclxuICBWaWV3Q2hpbGQsXHJcbiAgRXZlbnRFbWl0dGVyLFxyXG4gIE91dHB1dCxcclxufSBmcm9tICdAYW5ndWxhci9jb3JlJztcclxuaW1wb3J0IHsgVGhlbWVQYWxldHRlIH0gZnJvbSAnQGFuZ3VsYXIvbWF0ZXJpYWwvY29yZSc7XHJcbmltcG9ydCB7IE1hdFBhZ2luYXRvciwgTWF0UGFnaW5hdG9yTW9kdWxlIH0gZnJvbSAnQGFuZ3VsYXIvbWF0ZXJpYWwvcGFnaW5hdG9yJztcclxuaW1wb3J0IHsgTWF0U29ydCwgU29ydCB9IGZyb20gJ0Bhbmd1bGFyL21hdGVyaWFsL3NvcnQnO1xyXG5pbXBvcnQgeyBNYXRUYWJsZURhdGFTb3VyY2UgfSBmcm9tICdAYW5ndWxhci9tYXRlcmlhbC90YWJsZSc7XHJcbmltcG9ydCB7IFNlbGVjdGlvbk1vZGVsIH0gZnJvbSAnQGFuZ3VsYXIvY2RrL2NvbGxlY3Rpb25zJztcclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgRW50ZXRlRGF0YSB7XHJcbiAgbGliZWxsZTogc3RyaW5nO1xyXG4gIHByb3BlcnR5bmFtZTogc3RyaW5nO1xyXG59XHJcblxyXG50eXBlIEJ0bkZ1bmN0aW9uID0gKHZhbHVlOiBhbnkpID0+IHZvaWQ7XHJcbnR5cGUgcmFkaW9PckNoZWNrYm94ID0gJ3JhZGlvJyB8ICdjaGVja2JveCcgfCB1bmRlZmluZWQ7XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIHRyYW5zbGF0ZSB7XHJcbiAgaXRlbXNQZXJQYWdlTGFiZWw6IHN0cmluZztcclxuICBuZXh0UGFnZUxhYmVsOiBzdHJpbmc7XHJcbiAgcHJldmlvdXNQYWdlTGFiZWw6IHN0cmluZztcclxuICBmaXJzdFBhZ2VMYWJlbDogc3RyaW5nO1xyXG4gIGxhc3RQYWdlTGFiZWw6IHN0cmluZztcclxufVxyXG5cclxuZXhwb3J0IGludGVyZmFjZSBCdG5BY3Rpb24ge1xyXG4gIGFjdGlvbjogQnRuRnVuY3Rpb247XHJcbiAgY2xhc3M6IHN0cmluZztcclxuICBjb2xvcjogVGhlbWVQYWxldHRlO1xyXG4gIGljb25OYW1lOiBzdHJpbmc7XHJcbiAgaXN0ZXh0OiBib29sZWFuO1xyXG59XHJcblxyXG5AQ29tcG9uZW50KHtcclxuICBzZWxlY3RvcjogJ2lneS10YWJsZScsXHJcbiAgdGVtcGxhdGVVcmw6ICcuL3RhYmxlLmNvbXBvbmVudC5odG1sJyxcclxuICBzdHlsZVVybHM6IFsnLi90YWJsZS5jb21wb25lbnQuc2NzcyddLFxyXG59KVxyXG5leHBvcnQgY2xhc3MgVGFibGVDb21wb25lbnQgaW1wbGVtZW50cyBPbkluaXQge1xyXG4gIEBWaWV3Q2hpbGQoTWF0UGFnaW5hdG9yKSBwYWdpbmF0b3IhOiBNYXRQYWdpbmF0b3I7XHJcbiAgLyoqIGRvbm7DqWVzIGEgYWZmaWNoZXIgc3VyIGxhIHRhYmxlICovXHJcbiAgQElucHV0KCkgZGF0YTogYW55W10gfCB1bmRlZmluZWQ7XHJcblxyXG4gIC8qKiBwYWdpbmF0aW9uIGFmZmljaGUgbCBib3V0b24gZGVidXQvZmluICAgKi9cclxuICBASW5wdXQoKSBzaG93Rmlyc3RMYXN0QnV0dG9uczogYm9vbGVhbiA9IHRydWU7XHJcblxyXG4gIC8qKiBwYWdpbmF0aW9uIHZhbGV1ciBjb250ZW51IHBhciBwYWdlICAgKi9cclxuICBASW5wdXQoKSBwYWdlU2l6ZU9wdGlvbnM6IG51bWJlcltdID0gWzUsIDEwLCAyMF07XHJcblxyXG4gIC8qKiB0b3RhbCBkZXMgZG9ubsOpZXMgICovXHJcbiAgQElucHV0KCkgdG90YWxEYXRhITogbnVtYmVyO1xyXG5cclxuICAvKiogdGFpbGxlIGRlIGxhIHBhZ2UgICAqL1xyXG4gIEBJbnB1dCgpIHBhZ2VTaXplITogbnVtYmVyO1xyXG5cclxuICAvKiogaW5kZXggZGUgbGEgcGFnZSAgICovXHJcbiAgQElucHV0KCkgcGFnZUluZGV4ITogbnVtYmVyO1xyXG5cclxuICAvKiogaGVhZGVyIGFmZmljaGVyIHBhcm1pcyBsZSBjb250ZW51IGRlIGRhdGEgKi9cclxuICBASW5wdXQoKSBoZWFkZXI6IEVudGV0ZURhdGFbXSA9IFtdO1xyXG5cclxuICAvKipsaXN0ZSBkZXMgYm91dG9uICovXHJcbiAgQElucHV0KCkgbGlzdGJ0bjogQnRuQWN0aW9uW10gPSBbXTtcclxuXHJcbiAgLyoqIG5vbSBoZWFkZXIgcG91ciBsZXMgYm91dG9uKi9cclxuICBASW5wdXQoKSBsaWJlbGxlQWN0aW9uQnRuOiBzdHJpbmcgPSAnQWN0aW9ucyc7XHJcblxyXG4gIC8qKiDDqXbDqG5lbm1lbnQgc29ydCAqL1xyXG4gIEBPdXRwdXQoKSBfc29ydCA9IG5ldyBFdmVudEVtaXR0ZXI8Ym9vbGVhbj4oKTtcclxuXHJcbiAgLyoqIMOpdsOobmVubWVudCBwYWdpbmF0b3IgKi9cclxuICBAT3V0cHV0KCkgX3BhZ2VFdmVudCA9IG5ldyBFdmVudEVtaXR0ZXI8Ym9vbGVhbj4oKTtcclxuXHJcbiAgLyoqIGNob2l4IHV0aWxpc2VyIGVudHJlIGNoZWNrYm94IG91IHJhZGlvIGJ0biAqL1xyXG4gIEBJbnB1dCgpIGNoZWNrYm94T3JSYWRpbzogcmFkaW9PckNoZWNrYm94ID0gdW5kZWZpbmVkO1xyXG5cclxuICAvKiogY291bGV1ciB1dGlsaXPDqSBzdXIgY2hlY2tib3ggb3UgcmFkaW8gYnRuICovXHJcbiAgQElucHV0KCkgY2hlY2tib3hDb2xvcjogVGhlbWVQYWxldHRlID0gJ3ByaW1hcnknO1xyXG5cclxuICAvKiogw6l2w6huZW5tZW50IHJhZGlvYnRuIHNlbGVjdCBlbGVtZW50ICovXHJcbiAgQE91dHB1dCgpIHNlbGVjdHZhbHVlID0gbmV3IEV2ZW50RW1pdHRlcjxib29sZWFuPigpO1xyXG5cclxuICAvLyBBZmZpY2VyIFBhZ2luYXRpb25cclxuICBASW5wdXQoKSBoYXNQYWdpbmF0b3I6IGJvb2xlYW4gPSB0cnVlO1xyXG5cclxuICAvLyBHZXN0aW9uIHN0YXR1c1xyXG4gIEBJbnB1dCgpIGhhc1N0YXR1czogc3RyaW5nID0gJyc7XHJcblxyXG4gIC8vIFN0YXR1cyBDbGFzc1xyXG4gIEBJbnB1dCgpIGNsYXNzU2F0dXRzOiBzdHJpbmcgPSAnJztcclxuXHJcbiAgLyoqIMOpdsOobmVubWVudCBBY3Rpb24gY2xpY2sgKi9cclxuICBAT3V0cHV0KCkgQ2xpY2tFdmVudFZhbHVlID0gbmV3IEV2ZW50RW1pdHRlcjxib29sZWFuPigpO1xyXG5cclxuICAvKiogdGV4dCBwb3VyIGxhIGxhbmd1ZSAqL1xyXG4gIEBJbnB1dCgpIGxhbmd1YWdlOiB0cmFuc2xhdGUgPSB7XHJcbiAgICBpdGVtc1BlclBhZ2VMYWJlbDogJ0l0ZW1zIHBlciBwYWdlOicsXHJcbiAgICBuZXh0UGFnZUxhYmVsOiAnTmV4dCBwYWdlJyxcclxuICAgIHByZXZpb3VzUGFnZUxhYmVsOiAnUHJldmlvdXMgcGFnZScsXHJcbiAgICBmaXJzdFBhZ2VMYWJlbDogJ0ZpcnN0IHBhZ2UnLFxyXG4gICAgbGFzdFBhZ2VMYWJlbDogJ0xhc3QgcGFnZScsXHJcbiAgfTtcclxuXHJcbiAgaGVhZGVyQ29sdW1uOiBhbnlbXSA9IFtdO1xyXG4gIGRhdGFTb3VyY2UhOiBNYXRUYWJsZURhdGFTb3VyY2U8YW55PjtcclxuICBAVmlld0NoaWxkKE1hdFNvcnQpIHNvcnQhOiBNYXRTb3J0O1xyXG4gIHNlbGVjdGlvbiA9IG5ldyBTZWxlY3Rpb25Nb2RlbDxhbnk+KHRydWUsIFtdKTtcclxuICByYWRpb1NlbGVjdGVkITogT2JqZWN0O1xyXG5cclxuICBuZ0FmdGVyVmlld0luaXQoKSB7XHJcbiAgICBzZXRUaW1lb3V0KCgpID0+IHtcclxuICAgICAgdGhpcy5kYXRhU291cmNlID0gbmV3IE1hdFRhYmxlRGF0YVNvdXJjZTxhbnk+KHRoaXMuZGF0YSk7XHJcbiAgICAgIHRoaXMuZGF0YVNvdXJjZS5wYWdpbmF0b3IgPSB0aGlzLnBhZ2luYXRvcjtcclxuICAgICAgdGhpcy5kYXRhU291cmNlLnNvcnQgPSB0aGlzLnNvcnQ7XHJcbiAgICAgIC8qKiBpbml0aWFsaXNlIGwnYWZmaWNoYWdlIGRlcyB0ZXh0ZSAqL1xyXG4gICAgICB0aGlzLmluaXRUZXh0UGFnaW5hdGlvbigpO1xyXG4gICAgICAvKiogaW5pdGlhbGlzZSBsZSBjb250ZW51IGR1IHRhYmxlYXUgKi9cclxuICAgICAgdGhpcy5pbml0Q29udGVudSgpO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBjb25zdHJ1Y3RvcigpIHt9XHJcblxyXG4gIG5nT25Jbml0KCk6IHZvaWQge31cclxuXHJcbiAgaW5pdENvbnRlbnUoKSB7XHJcbiAgICAvKiogdGVzdCBzaSBsZXMgZG9ubsOpZXMgcmXDp3UgbmUgc29udCBwYXMgdmlkZSAqL1xyXG4gICAgaWYgKHRoaXMuZGF0YVNvdXJjZS5kYXRhLmxlbmd0aCA+IDApIHtcclxuICAgICAgLyoqIHRlc3Qgc2kgbGUgaGVhZGVyIHR5cGUgRW50ZXRlRGF0YSBhIMOpdMOpIGluaXRpYWxpc2VyICovXHJcbiAgICAgIGlmICghdGhpcy5oZWFkZXIubGVuZ3RoKSB7XHJcbiAgICAgICAgdGhpcy5oZWFkZXIgPSBPYmplY3Qua2V5cyh0aGlzLmRhdGFTb3VyY2UuZGF0YVswXSkubWFwKChlKSA9PiB7XHJcbiAgICAgICAgICByZXR1cm4geyBsaWJlbGxlOiBlLCBwcm9wZXJ0eW5hbWU6IGUgfTtcclxuICAgICAgICB9KTtcclxuICAgICAgfVxyXG5cclxuICAgICAgLy8gaWYgKHRoaXMuc2hvd0NsYXNpY0J0bikge1xyXG4gICAgICAvLyAgIC8qKiBBam91dCBjb2xvbm5lIEFjdGlvbiBzaSBib3V0b24gY2xhc2ljIGVzdCBhY3RpZiAqL1xyXG4gICAgICAvLyAgIHRoaXMuaGVhZGVyLnB1c2goe1xyXG4gICAgICAvLyAgICAgbGliZWxsZTogdGhpcy5saWJlbGxlQWN0aW9uQnRuLFxyXG4gICAgICAvLyAgICAgcHJvcGVydHluYW1lOiAnJyxcclxuICAgICAgLy8gICB9KTtcclxuICAgICAgLy8gfVxyXG5cclxuICAgICAgaWYgKHRoaXMubGlzdGJ0bi5sZW5ndGgpIHtcclxuICAgICAgICAvKiogQWpvdXQgY29sb25uZSBBY3Rpb24gc2kgdW4gYm91dG9uIGVzdCBhY3RpZiAqL1xyXG4gICAgICAgIHRoaXMuaGVhZGVyLnB1c2goe1xyXG4gICAgICAgICAgbGliZWxsZTogdGhpcy5saWJlbGxlQWN0aW9uQnRuLFxyXG4gICAgICAgICAgcHJvcGVydHluYW1lOiAnJyxcclxuICAgICAgICB9KTtcclxuICAgICAgfVxyXG5cclxuICAgICAgLyoqIEFqb3V0IHNlbGVjdCBkYW5zIGxpYmVsbGUgKi9cclxuICAgICAgaWYgKHRoaXMuY2hlY2tib3hPclJhZGlvKSB7XHJcbiAgICAgICAgdGhpcy5oZWFkZXIudW5zaGlmdCh7IGxpYmVsbGU6ICdzZWxlY3QnLCBwcm9wZXJ0eW5hbWU6ICcnIH0pO1xyXG4gICAgICB9XHJcblxyXG4gICAgICAvKiogYWZmZWN0YXRpb24gbGliZWxsZSBkYW5zIGhlYWRlckNvbHVtbiAqL1xyXG4gICAgICB0aGlzLmhlYWRlckNvbHVtbiA9IHRoaXMuaGVhZGVyLm1hcCgoY29sKSA9PiBjb2wubGliZWxsZSk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvKiogaW5pdGlhbGlzYXRpb24gYWZmaWNoYWdlIGxhbmd1ZSBldCBwYWdpbmF0aW9uICovXHJcbiAgaW5pdFRleHRQYWdpbmF0aW9uKCkge1xyXG4gICAgdGhpcy5wYWdpbmF0b3IuX2ludGwuZmlyc3RQYWdlTGFiZWwgPSB0aGlzLmxhbmd1YWdlLmZpcnN0UGFnZUxhYmVsO1xyXG4gICAgdGhpcy5wYWdpbmF0b3IuX2ludGwuaXRlbXNQZXJQYWdlTGFiZWwgPSB0aGlzLmxhbmd1YWdlLml0ZW1zUGVyUGFnZUxhYmVsO1xyXG4gICAgdGhpcy5wYWdpbmF0b3IuX2ludGwubGFzdFBhZ2VMYWJlbCA9IHRoaXMubGFuZ3VhZ2UubGFzdFBhZ2VMYWJlbDtcclxuICAgIHRoaXMucGFnaW5hdG9yLl9pbnRsLm5leHRQYWdlTGFiZWwgPSB0aGlzLmxhbmd1YWdlLm5leHRQYWdlTGFiZWw7XHJcbiAgICB0aGlzLnBhZ2luYXRvci5faW50bC5wcmV2aW91c1BhZ2VMYWJlbCA9IHRoaXMubGFuZ3VhZ2UucHJldmlvdXNQYWdlTGFiZWw7XHJcbiAgICB0aGlzLnBhZ2luYXRvci5faW50bC5nZXRSYW5nZUxhYmVsID0gdGhpcy5nZXRSYW5nZUxhYmVsO1xyXG4gIH1cclxuXHJcbiAgLyoqIHJlZGVmaW5pdGlvbiBkZSBnZXRSYW5nZUxhYmVsIGRhbnMgcGFnaW5hdG9yICovXHJcbiAgcHVibGljIGdldFJhbmdlTGFiZWwgPSAoXHJcbiAgICBwYWdlOiBudW1iZXIsXHJcbiAgICBwYWdlU2l6ZTogbnVtYmVyLFxyXG4gICAgbGVuZ3RoOiBudW1iZXJcclxuICApOiBzdHJpbmcgPT4ge1xyXG4gICAgdGhpcy50b3RhbERhdGEgPSB0aGlzLnRvdGFsRGF0YSA/IHRoaXMudG90YWxEYXRhIDogdGhpcy5wYWdpbmF0b3IubGVuZ3RoO1xyXG4gICAgdGhpcy5wYWdlSW5kZXggPSB0aGlzLnBhZ2VJbmRleCA/IHRoaXMucGFnZUluZGV4IDogdGhpcy5wYWdpbmF0b3IucGFnZUluZGV4O1xyXG4gICAgdGhpcy5wYWdlU2l6ZSA9IHRoaXMucGFnZVNpemUgPyB0aGlzLnBhZ2VTaXplIDogdGhpcy5wYWdpbmF0b3IucGFnZVNpemU7XHJcbiAgICBpZiAodGhpcy50b3RhbERhdGEgPT09IDAgfHwgdGhpcy5wYWdlU2l6ZSA9PT0gMCkge1xyXG4gICAgICByZXR1cm4gYGphdmFzY3JpcHRcIj4wIC8gJHt0aGlzLnRvdGFsRGF0YX1gO1xyXG4gICAgfVxyXG4gICAgdGhpcy50b3RhbERhdGEgPSBNYXRoLm1heCh0aGlzLnRvdGFsRGF0YSwgMCk7XHJcbiAgICBjb25zdCBzdGFydEluZGV4OiBudW1iZXIgPSBwYWdlICogK3RoaXMucGFnZVNpemU7XHJcbiAgICBjb25zdCBlbmRJbmRleDogbnVtYmVyID1cclxuICAgICAgc3RhcnRJbmRleCA8IHRoaXMudG90YWxEYXRhXHJcbiAgICAgICAgPyBNYXRoLm1pbihzdGFydEluZGV4ICsgdGhpcy5wYWdlU2l6ZSwgdGhpcy50b3RhbERhdGEpXHJcbiAgICAgICAgOiBzdGFydEluZGV4ICsgdGhpcy5wYWdlU2l6ZTtcclxuICAgIHJldHVybiBgJHtzdGFydEluZGV4ICsgMX0gLSAke2VuZEluZGV4fSAvICR7K3RoaXMudG90YWxEYXRhfWA7XHJcbiAgfTtcclxuXHJcbiAgLyoqIHNvcnQgZGF0YSAqL1xyXG4gIHNvcnRDaGFuZ2Uoc29ydFN0YXRlOiBTb3J0IHwgYW55KSB7XHJcbiAgICB0aGlzLl9zb3J0LmVtaXQoc29ydFN0YXRlKTtcclxuICB9XHJcblxyXG4gIC8qKiBldmVudCBwYWdpbmF0ZSAqL1xyXG4gIHBhZ2VFdmVudChldmVudDogYW55KSB7XHJcbiAgICB0aGlzLl9wYWdlRXZlbnQuZW1pdChldmVudCk7XHJcbiAgfVxyXG5cclxuICAvKiogSW5kaXF1ZSBzaSBsZSBub21icmUgZCfDqWzDqW1lbnRzIHPDqWxlY3Rpb25uw6lzIGNvcnJlc3BvbmQgYXUgbm9tYnJlIHRvdGFsIGRlIGxpZ25lcy5cclxuICAgKi9cclxuICBpc0FsbFNlbGVjdGVkKCkge1xyXG4gICAgY29uc3QgbnVtU2VsZWN0ZWQgPSB0aGlzLnNlbGVjdGlvbi5zZWxlY3RlZC5sZW5ndGg7XHJcbiAgICBjb25zdCBudW1Sb3dzID0gdGhpcy5kYXRhU291cmNlLmRhdGEubGVuZ3RoO1xyXG4gICAgcmV0dXJuIG51bVNlbGVjdGVkID09PSBudW1Sb3dzO1xyXG4gIH1cclxuXHJcbiAgLyoqIFNlbGVjdGlvbm5lIHRvdXMgbGVzIGxpZ25lIHNpIGlsIG5lIHNvbnQgcGFzIHRvdXMgc2VsZWN0aW9ubmVyOyBzaW5vbiBkZXNlbGVjdGlvbm5lIHRvdXRzICovXHJcbiAgbWFzdGVyVG9nZ2xlKCkge1xyXG4gICAgaWYgKHRoaXMuaXNBbGxTZWxlY3RlZCgpKSB7XHJcbiAgICAgIHRoaXMuc2VsZWN0aW9uLmNsZWFyKCk7XHJcbiAgICAgIHRoaXMuc2VsZWN0Um93KHRoaXMuc2VsZWN0aW9uLnNlbGVjdGVkKTtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG4gICAgdGhpcy5zZWxlY3Rpb24uc2VsZWN0KC4uLnRoaXMuZGF0YVNvdXJjZS5kYXRhKTtcclxuICAgIHRoaXMuc2VsZWN0Um93KHRoaXMuc2VsZWN0aW9uLnNlbGVjdGVkKTtcclxuICB9XHJcblxyXG4gIC8qKiBMZSBsaWJlbGzDqSBkZSBsYSBjYXNlIMOgIGNvY2hlciBzdXIgbGEgbGlnbmUgdHJhbnNtaXNlICovXHJcbiAgY2hlY2tib3hMYWJlbChyb3c/OiBhbnkpOiBzdHJpbmcge1xyXG4gICAgdmFyIHJlc3VsdDogc3RyaW5nO1xyXG4gICAgaWYgKCFyb3cpIHtcclxuICAgICAgcmVzdWx0ID0gYCR7dGhpcy5pc0FsbFNlbGVjdGVkKCkgPyAnZGVzZWxlY3QnIDogJ3NlbGVjdCd9IGFsbGA7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICByZXN1bHQgPSBgJHt0aGlzLnNlbGVjdGlvbi5pc1NlbGVjdGVkKHJvdykgPyAnZGVzZWxlY3QnIDogJ3NlbGVjdCd9IHJvdyAke1xyXG4gICAgICAgIHJvdy5wb3NpdGlvbiArIDFcclxuICAgICAgfWA7XHJcbiAgICB9XHJcbiAgICB0aGlzLnNlbGVjdFJvdyh0aGlzLnNlbGVjdGlvbi5zZWxlY3RlZCk7XHJcbiAgICByZXR1cm4gcmVzdWx0O1xyXG4gIH1cclxuXHJcbiAgLyoqIHJldG91cm4gbGEgbGlzdGUgc2VsZWN0aW9ubmVyICovXHJcbiAgc2VsZWN0Um93KHZhbHVlOiBhbnkpIHtcclxuICAgIHRoaXMuc2VsZWN0dmFsdWUuZW1pdCh2YWx1ZSk7XHJcbiAgfVxyXG5cclxuICAvKiogdGVzdCBoZWFkZXIgYWN0aW9uIGxpYmVsbGUgKi9cclxuICBpc0FjdGlvbihpdGVtOiBzdHJpbmcpIHtcclxuICAgIHJldHVybiBpdGVtID09PSB0aGlzLmxpYmVsbGVBY3Rpb25CdG47XHJcbiAgfVxyXG5cclxuICAvKiogdGVzdCBoZWFkZXIgc2VsZWN0IGxpYmVsbGUgKi9cclxuICBpc1NlbGVjdChpdGVtOiBhbnkpIHtcclxuICAgIHJldHVybiBpdGVtID09PSAnc2VsZWN0JztcclxuICB9XHJcblxyXG4gIC8qKiB0ZXN0IHNpIGNoZWNrYm94IHV0aWxpc8OpIG91IGZhbHNlIHJhZGlvICovXHJcbiAgaXNDaGVja2JveCgpIHtcclxuICAgIHJldHVybiB0aGlzLmNoZWNrYm94T3JSYWRpbyA9PT0gJ2NoZWNrYm94JztcclxuICB9XHJcblxyXG4gIC8qKiBzZWxlY3Rpb24gZWxlbWVudCBzdXIgY2xpY2sgZGUgbGEgbGlnbmUgKi9cclxuICBjaGVja0xpbmUocm93OiBhbnksIGluZGV4OiBudW1iZXIpIHtcclxuICAgIGlmICghdGhpcy5pc0NoZWNrYm94KCkgJiYgdGhpcy5jaGVja2JveE9yUmFkaW8pIHtcclxuICAgICAgdGhpcy5yYWRpb1NlbGVjdGVkID0gcm93O1xyXG4gICAgICB0aGlzLnNlbGVjdFJvdyhyb3cpO1xyXG4gICAgfSBlbHNlIGlmICh0aGlzLmNoZWNrYm94T3JSYWRpbykge1xyXG4gICAgICB0aGlzLnNlbGVjdGlvbi50b2dnbGUocm93KTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIEV2ZW50Q2xpY2tCdG4oZXZlbnQ6IGFueSkge1xyXG4gICAgdGhpcy5DbGlja0V2ZW50VmFsdWUuZW1pdChldmVudCk7XHJcbiAgfVxyXG59XHJcbiIsIjxkaXYgY2xhc3M9XCJpZ3ktdGFibGVcIj5cclxuICA8dGFibGUgbWF0LXRhYmxlIFtkYXRhU291cmNlXT1cImRhdGFTb3VyY2VcIiBtYXRTb3J0IChtYXRTb3J0Q2hhbmdlKT1cInNvcnRDaGFuZ2UoJGV2ZW50KVwiPlxyXG4gICAgPG5nLWNvbnRhaW5lciBbbWF0Q29sdW1uRGVmXT1cIml0ZW0ubGliZWxsZVwiICpuZ0Zvcj1cImxldCBpdGVtIG9mIGhlYWRlcjsgbGV0IGkgPSBpbmRleFwiPlxyXG4gICAgICA8dGggbWF0LWhlYWRlci1jZWxsIG1hdC1zb3J0LWhlYWRlciAqbWF0SGVhZGVyQ2VsbERlZlxyXG4gICAgICAgIFtkaXNhYmxlZF09XCJpc0FjdGlvbihpdGVtLmxpYmVsbGUpIHx8IGlzU2VsZWN0KGl0ZW0ubGliZWxsZSlcIlxyXG4gICAgICAgIFtuZ0NsYXNzXT1cInsgJ2NvbC1hY3Rpb24tY250JzogaXRlbS5saWJlbGxlID09PSBsaWJlbGxlQWN0aW9uQnRuIH1cIj5cclxuICAgICAgICA8c3BhbiAqbmdJZj1cIiFpc1NlbGVjdChpdGVtLmxpYmVsbGUpOyBlbHNlIGNoZWNrYm94aGVhZGVyXCI+e3tcclxuICAgICAgICAgIGl0ZW0ubGliZWxsZVxyXG4gICAgICAgICAgfX08L3NwYW4+XHJcbiAgICAgICAgPG5nLXRlbXBsYXRlICNjaGVja2JveGhlYWRlcj5cclxuICAgICAgICAgIDxuZy1jb250YWluZXIgKm5nSWY9XCJpc0NoZWNrYm94KClcIj5cclxuICAgICAgICAgICAgPG1hdC1jaGVja2JveCAoY2hhbmdlKT1cIiRldmVudCA/IG1hc3RlclRvZ2dsZSgpIDogbnVsbFwiIFtjaGVja2VkXT1cInNlbGVjdGlvbi5oYXNWYWx1ZSgpICYmIGlzQWxsU2VsZWN0ZWQoKVwiXHJcbiAgICAgICAgICAgICAgW2NvbG9yXT1cImNoZWNrYm94Q29sb3JcIiBbaW5kZXRlcm1pbmF0ZV09XCJzZWxlY3Rpb24uaGFzVmFsdWUoKSAmJiAhaXNBbGxTZWxlY3RlZCgpXCJcclxuICAgICAgICAgICAgICBbYXJpYS1sYWJlbF09XCJjaGVja2JveExhYmVsKClcIj5cclxuICAgICAgICAgICAgPC9tYXQtY2hlY2tib3g+XHJcbiAgICAgICAgICA8L25nLWNvbnRhaW5lcj5cclxuICAgICAgICA8L25nLXRlbXBsYXRlPlxyXG4gICAgICA8L3RoPlxyXG4gICAgICA8dGQgbWF0LWNlbGwgKm1hdENlbGxEZWY9XCJsZXQgZWxlbWVudDsgbGV0IHJvd0luZGV4ID0gaW5kZXhcIlxyXG4gICAgICAgIFtuZ0NsYXNzXT1cInsgJ2NvbC1hY3Rpb24tY250JzogaXRlbS5saWJlbGxlID09PSBsaWJlbGxlQWN0aW9uQnRuIH1cIj5cclxuICAgICAgICA8c3BhbiAqbmdJZj1cIiFpc0FjdGlvbihpdGVtLmxpYmVsbGUpICYmICFpc1NlbGVjdChpdGVtLmxpYmVsbGUpOyBlbHNlIGF1dHJlXCIgW25nQ2xhc3NdPVwiaXRlbS5saWJlbGxlID09PSBoYXNTdGF0dXMgPyBjbGFzc1NhdHV0cyA6ICcnXCI+XHJcbiAgICAgICAgICB7eyBlbGVtZW50W2l0ZW0ucHJvcGVydHluYW1lXSB9fVxyXG4gICAgICAgIDwvc3Bhbj5cclxuICAgICAgICA8bmctdGVtcGxhdGUgI2F1dHJlPlxyXG4gICAgICAgICAgPG5nLWNvbnRhaW5lciAqbmdJZj1cImlzQWN0aW9uKGl0ZW0ubGliZWxsZSk7IGVsc2UgY2hlY2tib3hSYWRpb1wiPlxyXG4gICAgICAgICAgICA8YnV0dG9uIG1hdC1idXR0b24gY2xhc3M9XCJ0YWJsZS1idG5cIiBbbmdDbGFzc109XCJidG4uY2xhc3NcIiBbY29sb3JdPVwiYnRuLmNvbG9yXCIgKGNsaWNrKT1cImJ0bi5hY3Rpb24oZWxlbWVudClcIlxyXG4gICAgICAgICAgICAgICpuZ0Zvcj1cImxldCBidG4gb2YgbGlzdGJ0bjsgbGV0IGogPSBpbmRleFwiPlxyXG4gICAgICAgICAgICAgIDxzcGFuIGNsYXNzPVwibWF0ZXJpYWwtaWNvbnNcIiAqbmdJZj1cIiFidG4uaXN0ZXh0XCI+e3sgYnRuLmljb25OYW1lIH19PC9zcGFuPlxyXG4gICAgICAgICAgICAgIDxzcGFuICpuZ0lmPVwiYnRuLmlzdGV4dFwiIGNsYXNzPVwie3tidG4uY2xhc3N9fVwiPnt7IGJ0bi5pY29uTmFtZSB9fTwvc3Bhbj5cclxuICAgICAgICAgICAgPC9idXR0b24+XHJcbiAgICAgICAgICA8L25nLWNvbnRhaW5lcj5cclxuICAgICAgICAgIDxuZy10ZW1wbGF0ZSAjY2hlY2tib3hSYWRpbz5cclxuICAgICAgICAgICAgPG5nLWNvbnRhaW5lciAqbmdJZj1cImlzQ2hlY2tib3goKVwiPlxyXG4gICAgICAgICAgICAgIDxtYXQtY2hlY2tib3ggKGNsaWNrKT1cIiRldmVudC5zdG9wUHJvcGFnYXRpb24oKVwiIChjaGFuZ2UpPVwiJGV2ZW50ID8gc2VsZWN0aW9uLnRvZ2dsZShlbGVtZW50KSA6IG51bGxcIlxyXG4gICAgICAgICAgICAgICAgW2NvbG9yXT1cImNoZWNrYm94Q29sb3JcIiBbY2hlY2tlZF09XCJzZWxlY3Rpb24uaXNTZWxlY3RlZChlbGVtZW50KVwiIFthcmlhLWxhYmVsXT1cImNoZWNrYm94TGFiZWwoZWxlbWVudClcIj5cclxuICAgICAgICAgICAgICA8L21hdC1jaGVja2JveD5cclxuICAgICAgICAgICAgPC9uZy1jb250YWluZXI+XHJcbiAgICAgICAgICAgIDxuZy1jb250YWluZXIgKm5nSWY9XCIhaXNDaGVja2JveCgpXCI+XHJcbiAgICAgICAgICAgICAgPG1hdC1yYWRpby1idXR0b24gW2NvbG9yXT1cImNoZWNrYm94Q29sb3JcIiBuYW1lPVwiU2VsZWN0aW9uUmFkaW9cIiBbdmFsdWVdPVwiZWxlbWVudFwiXHJcbiAgICAgICAgICAgICAgICAoY2xpY2spPVwic2VsZWN0Um93KGVsZW1lbnQpXCIgKGNoYW5nZSk9XCIkZXZlbnQgPyAocmFkaW9TZWxlY3RlZCA9ICRldmVudC52YWx1ZSkgOiBudWxsXCJcclxuICAgICAgICAgICAgICAgIFtjaGVja2VkXT1cImVsZW1lbnQgPT0gcmFkaW9TZWxlY3RlZFwiPlxyXG4gICAgICAgICAgICAgIDwvbWF0LXJhZGlvLWJ1dHRvbj5cclxuICAgICAgICAgICAgPC9uZy1jb250YWluZXI+XHJcbiAgICAgICAgICA8L25nLXRlbXBsYXRlPlxyXG4gICAgICAgIDwvbmctdGVtcGxhdGU+XHJcbiAgICAgIDwvdGQ+XHJcbiAgICA8L25nLWNvbnRhaW5lcj5cclxuXHJcbiAgICA8dHIgbWF0LWhlYWRlci1yb3cgKm1hdEhlYWRlclJvd0RlZj1cImhlYWRlckNvbHVtblwiPjwvdHI+XHJcbiAgICA8dHIgbWF0LXJvdyAqbWF0Um93RGVmPVwibGV0IHJvdzsgbGV0IHJvd0luZGV4ID0gaW5kZXg7IGNvbHVtbnM6IGhlYWRlckNvbHVtblwiIChjbGljayk9XCJjaGVja0xpbmUocm93LCByb3dJbmRleClcIj5cclxuICAgIDwvdHI+XHJcbiAgPC90YWJsZT5cclxuICA8bWF0LXBhZ2luYXRvciBbcGFnZVNpemVPcHRpb25zXT1cInBhZ2VTaXplT3B0aW9uc1wiIFtzaG93Rmlyc3RMYXN0QnV0dG9uc109XCJzaG93Rmlyc3RMYXN0QnV0dG9uc1wiIFtsZW5ndGhdPVwidG90YWxEYXRhXCJcclxuICAgIFtwYWdlU2l6ZV09XCJwYWdlU2l6ZVwiIFtwYWdlSW5kZXhdPVwicGFnZUluZGV4XCIgKHBhZ2UpPVwicGFnZUV2ZW50KCRldmVudClcIiAqbmdJZj1cImhhc1BhZ2luYXRvclwiPlxyXG4gIDwvbWF0LXBhZ2luYXRvcj5cclxuPC9kaXY+XHJcbiJdfQ==